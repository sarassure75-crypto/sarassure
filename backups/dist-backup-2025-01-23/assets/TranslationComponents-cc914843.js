var J=Object.defineProperty,K=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var A=(s,r,o)=>r in s?J(s,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[r]=o,p=(s,r)=>{for(var o in r||(r={}))Y.call(r,o)&&A(s,o,r[o]);if(U)for(var o of U(r))Z.call(r,o)&&A(s,o,r[o]);return s},x=(s,r)=>K(s,W(r));var f=(s,r,o)=>new Promise((u,v)=>{var d=n=>{try{g(o.next(n))}catch(y){v(y)}},m=n=>{try{g(o.throw(n))}catch(y){v(y)}},g=n=>n.done?u(n.value):Promise.resolve(n.value).then(d,m);g((o=o.apply(s,r)).next())});import{j as e}from"./radix-ui-2f58371e.js";import{r as i}from"./react-vendor-6cf6ded9.js";import{i as $,C as _,k as L,l as z,j as T,e as b,c as I,g as ee,f as te,aM as P,aN as se,aO as ae,aP as re,aQ as oe}from"./index-426aa6f1.js";import{t as F,ah as ie,Q as le,X as ne,ai as de,P as ce,v as ue}from"./ui-icons-e73ce4f7.js";const G={samsung:{id:"samsung",name:"Samsung / Android Standard",description:"Bouton Power Ã  droite, Volume Ã  gauche",buttons:{power:{id:"power",label:"Power",icon:"â»",position:{side:"right",top:"35%"},color:"#ef4444",height:"40px",description:"Bouton d'allumage"},volumeUp:{id:"volumeUp",label:"Vol+",icon:"ðŸ”Š",position:{side:"left",top:"25%"},color:"#3b82f6",height:"40px",description:"Bouton volume haut"},volumeDown:{id:"volumeDown",label:"Vol-",icon:"ðŸ”‰",position:{side:"left",top:"40%"},color:"#06b6d4",height:"40px",description:"Bouton volume bas"}}},iphone:{id:"iphone",name:"iPhone Style",description:"Power Ã  droite haut, Volume sÃ©parÃ©s Ã  gauche",buttons:{power:{id:"power",label:"Power",icon:"â»",position:{side:"right",top:"20%"},color:"#ef4444",height:"50px",description:"Bouton d'allumage"},volumeUp:{id:"volumeUp",label:"Vol+",icon:"ðŸ”Š",position:{side:"left",top:"18%"},color:"#3b82f6",height:"35px",description:"Bouton volume haut"},volumeDown:{id:"volumeDown",label:"Vol-",icon:"ðŸ”‰",position:{side:"left",top:"28%"},color:"#06b6d4",height:"35px",description:"Bouton volume bas"}}},pixel:{id:"pixel",name:"Google Pixel",description:"Tous les boutons Ã  droite, Power en haut",buttons:{power:{id:"power",label:"Power",icon:"â»",position:{side:"right",top:"22%"},color:"#ef4444",height:"45px",description:"Bouton d'allumage"},volumeUp:{id:"volumeUp",label:"Vol+",icon:"ðŸ”Š",position:{side:"right",top:"35%"},color:"#3b82f6",height:"38px",description:"Bouton volume haut"},volumeDown:{id:"volumeDown",label:"Vol-",icon:"ðŸ”‰",position:{side:"right",top:"47%"},color:"#06b6d4",height:"38px",description:"Bouton volume bas"}}},xiaomi:{id:"xiaomi",name:"Xiaomi / Redmi",description:"Power Ã  droite milieu, Volume Ã  droite haut",buttons:{power:{id:"power",label:"Power",icon:"â»",position:{side:"right",top:"38%"},color:"#ef4444",height:"42px",description:"Bouton d'allumage"},volumeUp:{id:"volumeUp",label:"Vol+",icon:"ðŸ”Š",position:{side:"right",top:"22%"},color:"#3b82f6",height:"40px",description:"Bouton volume haut"},volumeDown:{id:"volumeDown",label:"Vol-",icon:"ðŸ”‰",position:{side:"right",top:"30%"},color:"#06b6d4",height:"40px",description:"Bouton volume bas"}}},oneplus:{id:"oneplus",name:"OnePlus",description:"Power Ã  droite, Volume Ã  gauche, switch alerte Ã  droite haut",buttons:{power:{id:"power",label:"Power",icon:"â»",position:{side:"right",top:"40%"},color:"#ef4444",height:"45px",description:"Bouton d'allumage"},volumeUp:{id:"volumeUp",label:"Vol+",icon:"ðŸ”Š",position:{side:"left",top:"28%"},color:"#3b82f6",height:"42px",description:"Bouton volume haut"},volumeDown:{id:"volumeDown",label:"Vol-",icon:"ðŸ”‰",position:{side:"left",top:"42%"},color:"#06b6d4",height:"42px",description:"Bouton volume bas"}}},huawei:{id:"huawei",name:"Huawei / Honor",description:"Power Ã  droite bas, Volume Ã  droite haut",buttons:{power:{id:"power",label:"Power",icon:"â»",position:{side:"right",top:"42%"},color:"#ef4444",height:"48px",description:"Bouton d'allumage"},volumeUp:{id:"volumeUp",label:"Vol+",icon:"ðŸ”Š",position:{side:"right",top:"24%"},color:"#3b82f6",height:"38px",description:"Bouton volume haut"},volumeDown:{id:"volumeDown",label:"Vol-",icon:"ðŸ”‰",position:{side:"right",top:"33%"},color:"#06b6d4",height:"38px",description:"Bouton volume bas"}}}},fe=(s="samsung")=>G[s]||G.samsung,be=()=>Object.values(G).map(s=>({id:s.id,name:s.name,description:s.description})),ve="samsung";function ye({text:s,language:r="fr",onTranslate:o=null,className:u=""}){const[v,d]=i.useState(s),[m,g]=i.useState(!1),[n,y]=i.useState([]);return i.useEffect(()=>{(()=>f(this,null,function*(){if(r!=="fr")try{const c=yield P(r);y(c)}catch(c){console.error("Error loading glossary translations:",c)}}))()},[r]),i.useEffect(()=>{(()=>f(this,null,function*(){if(r==="fr"){d(s);return}g(!0);try{const c=yield oe(s,r,n);d(c),o&&o(c)}catch(c){console.error("Error translating text:",c),d(s)}finally{g(!1)}}))()},[s,r,n,o]),e.jsxs("div",{className:I("relative",u),children:[m&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/50 rounded",children:e.jsx(F,{className:"h-4 w-4 animate-spin text-blue-600"})}),e.jsx("p",{className:I("text-gray-800",m&&"opacity-50"),children:v})]})}function je(){const{toast:s}=$(),[r,o]=i.useState([]),[u,v]=i.useState("en"),[d,m]=i.useState([]),[g,n]=i.useState([]),[y,C]=i.useState(!0),[c,S]=i.useState(null),[h,N]=i.useState({}),[V,E]=i.useState(!1),[j,B]=i.useState(""),[O,D]=i.useState(!1),[l,w]=i.useState({glossary_id:"",glossary_term:"",translated_term:"",translated_definition:"",translated_example:""});i.useEffect(()=>{(()=>f(this,null,function*(){try{const a=yield ee();o(a);const X=yield te();n(X),a.length>0&&v(a[0].language_code)}catch(a){console.error("Error loading data:",a),s({title:"Erreur",description:"Impossible de charger les donnÃ©es",variant:"destructive"})}finally{C(!1)}}))()},[s]),i.useEffect(()=>{(()=>f(this,null,function*(){try{const a=yield P(u);m(a)}catch(a){console.error("Error loading glossary translations:",a),s({title:"Erreur",description:"Impossible de charger les traductions",variant:"destructive"})}}))()},[u,s]);const q=t=>{w(x(p({},l),{glossary_id:t.id,glossary_term:t.term})),B(t.term),D(!1)},k=j.trim()===""?[]:g.filter(t=>t.term.toLowerCase().includes(j.toLowerCase())||t.definition.toLowerCase().includes(j.toLowerCase())),H=t=>{S(t.id),N({translated_term:t.translated_term,translated_definition:t.translated_definition,translated_example:t.translated_example||""})},M=t=>f(this,null,function*(){try{yield se(t,h),m(d.map(a=>a.id===t?p(p({},a),h):a)),S(null),s({title:"SuccÃ¨s",description:"Traduction mise Ã  jour",variant:"default"})}catch(a){console.error("Error updating translation:",a),s({title:"Erreur",description:"Impossible de mettre Ã  jour la traduction",variant:"destructive"})}}),Q=t=>f(this,null,function*(){if(confirm("ÃŠtes-vous sÃ»r de vouloir supprimer cette traduction ?"))try{yield ae(t),m(d.filter(a=>a.id!==t)),s({title:"SuccÃ¨s",description:"Traduction supprimÃ©e",variant:"default"})}catch(a){console.error("Error deleting translation:",a),s({title:"Erreur",description:"Impossible de supprimer la traduction",variant:"destructive"})}}),R=()=>f(this,null,function*(){if(!l.glossary_id||!l.translated_term||!l.translated_definition){s({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires (y compris sÃ©lectionner un terme du lexique)",variant:"destructive"});return}try{const t=yield re(l.glossary_id,u,l.translated_term,l.translated_definition,l.translated_example),a=yield P(u);m(a),w({glossary_id:"",glossary_term:"",translated_term:"",translated_definition:"",translated_example:""}),B(""),E(!1),s({title:"SuccÃ¨s",description:"Traduction crÃ©Ã©e",variant:"default"})}catch(t){console.error("Error creating translation:",t),s({title:"Erreur",description:"Impossible de crÃ©er la traduction",variant:"destructive"})}});return y?e.jsx("div",{className:"flex justify-center items-center p-8",children:e.jsx(F,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Gestion des Traductions"}),e.jsx("p",{className:"text-gray-600",children:"GÃ©rez les traductions du lexique pour diffÃ©rentes langues"})]}),e.jsxs(_,{children:[e.jsx(L,{children:e.jsx(z,{children:"SÃ©lectionner une langue"})}),e.jsx(T,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:r.map(t=>e.jsx(b,{onClick:()=>v(t.language_code),variant:u===t.language_code?"default":"outline",className:"w-full",children:t.language_name},t.language_code))})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(b,{onClick:()=>E(!V),className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4"}),"Ajouter une traduction"]})}),V&&e.jsxs(_,{className:"bg-blue-50 border-blue-200",children:[e.jsx(L,{children:e.jsxs(z,{children:["Nouvelle traduction (",u.toUpperCase(),")"]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Terme original du lexique *"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Commencez Ã  taper pour chercher...",value:j,onChange:t=>{B(t.target.value),D(!0)},onFocus:()=>D(!0),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.glossary_id&&e.jsxs("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded text-sm text-green-700",children:["âœ“ SÃ©lectionnÃ©: ",e.jsx("strong",{children:l.glossary_term})]}),O&&j.trim()!==""&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:k.length>0?k.map(t=>e.jsxs("button",{onClick:()=>q(t),className:"w-full text-left p-3 hover:bg-blue-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.term}),e.jsx("div",{className:"text-xs text-gray-600",children:t.definition})]},t.id)):e.jsx("div",{className:"p-3 text-sm text-gray-500",children:"Aucun terme trouvÃ©"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Terme traduit *"}),e.jsx("input",{type:"text",value:l.translated_term,onChange:t=>w(x(p({},l),{translated_term:t.target.value})),placeholder:"Ex: Settings",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"DÃ©finition traduite *"}),e.jsx("textarea",{value:l.translated_definition,onChange:t=>w(x(p({},l),{translated_definition:t.target.value})),placeholder:"Entrez la dÃ©finition traduite...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exemple traduit (optionnel)"}),e.jsx("input",{type:"text",value:l.translated_example,onChange:t=>w(x(p({},l),{translated_example:t.target.value})),placeholder:"Ex: Tap Settings to change options",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[e.jsx(b,{variant:"outline",onClick:()=>E(!1),children:"Annuler"}),e.jsx(b,{onClick:R,className:"bg-green-600 hover:bg-green-700",children:"CrÃ©er"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h2",{className:"text-xl font-bold",children:["Traductions (",d.length,")"]}),d.length===0?e.jsx(_,{className:"bg-gray-50",children:e.jsx(T,{className:"pt-6 text-center text-gray-600",children:"Aucune traduction pour cette langue"})}):e.jsx("div",{className:"grid gap-3",children:d.map(t=>e.jsx(_,{className:c===t.id?"border-blue-500 bg-blue-50":"",children:e.jsx(T,{className:"pt-6",children:c===t.id?e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:h.translated_term,onChange:a=>N(x(p({},h),{translated_term:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg font-bold text-blue-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("textarea",{value:h.translated_definition,onChange:a=>N(x(p({},h),{translated_definition:a.target.value})),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("input",{type:"text",value:h.translated_example,onChange:a=>N(x(p({},h),{translated_example:a.target.value})),placeholder:"Exemple...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-600 italic focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[e.jsx(b,{size:"sm",variant:"outline",onClick:()=>S(null),children:e.jsx(ne,{className:"h-4 w-4"})}),e.jsx(b,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>M(t.id),children:e.jsx(de,{className:"h-4 w-4"})})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-bold text-blue-700",children:t.translated_term}),e.jsx("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded",children:t.glossary.category})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Terme original: ",e.jsx("strong",{children:t.glossary.term})]}),e.jsx("p",{className:"text-gray-700",children:t.translated_definition}),t.translated_example&&e.jsxs("p",{className:"text-sm text-gray-600 italic",children:['ðŸ’¡ Exemple: "',t.translated_example,'"']}),e.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[e.jsx(b,{size:"sm",variant:"outline",onClick:()=>H(t),children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx(b,{size:"sm",variant:"outline",className:"text-red-600 hover:bg-red-50",onClick:()=>Q(t.id),children:e.jsx(ue,{className:"h-4 w-4"})})]})]})})},t.id))})]})]})}export{je as A,ve as D,ye as T,be as a,fe as g};
