var p=Object.defineProperty,q=Object.defineProperties;var w=Object.getOwnPropertyDescriptors;var l=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var h=(r,e,t)=>e in r?p(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,d=(r,e)=>{for(var t in e||(e={}))_.call(e,t)&&h(r,t,e[t]);if(l)for(var t of l(e))x.call(e,t)&&h(r,t,e[t]);return r},g=(r,e)=>q(r,w(e));var i=(r,e,t)=>new Promise((s,u)=>{var f=o=>{try{c(t.next(o))}catch(n){u(n)}},y=o=>{try{c(t.throw(o))}catch(n){u(n)}},c=o=>o.done?s(o.value):Promise.resolve(o.value).then(f,y);c((t=t.apply(r,e)).next())});import{s as a}from"./index-426aa6f1.js";function R(){return i(this,arguments,function*(r={}){try{let e=a.from("exercise_requests").select("*").order("priority",{ascending:!1}).order("created_at",{ascending:!1});r.status&&(e=e.eq("status",r.status)),r.priority&&(e=e.eq("priority",r.priority)),r.category_id&&(e=e.eq("category_id",r.category_id));const{data:t,error:s}=yield e;if(s)throw s;return t||[]}catch(e){throw console.error("Error fetching exercise requests:",e),e}})}function b(r){return i(this,null,function*(){try{const{data:{user:e}}=yield a.auth.getUser();if(!e)throw new Error("User not authenticated");const{data:t,error:s}=yield a.from("exercise_requests").insert([g(d({},r),{created_by:e.id,status:"pending"})]).select("*").single();if(s)throw s;return t}catch(e){throw console.error("Error creating exercise request:",e),e}})}function k(r,e){return i(this,null,function*(){try{const{data:t,error:s}=yield a.from("exercise_requests").update(e).eq("id",r).select("*").single();if(s)throw s;return t}catch(t){throw console.error("Error updating exercise request:",t),t}})}function U(r){return i(this,null,function*(){try{const{error:e}=yield a.from("exercise_requests").delete().eq("id",r);if(e)throw e;return!0}catch(e){throw console.error("Error deleting exercise request:",e),e}})}function S(r,e){return i(this,null,function*(){try{const{data:t,error:s}=yield a.rpc("link_exercise_to_request",{p_request_code:r,p_task_id:e});if(s)throw s;return t}catch(t){throw console.error("Error linking exercise to request:",t),t}})}function T(){return i(this,null,function*(){try{const{data:r,error:e}=yield a.from("exercise_requests").select("status, priority");if(e)throw e;return{total:r.length,by_status:{pending:r.filter(s=>s.status==="pending").length,in_progress:r.filter(s=>s.status==="in_progress").length,completed:r.filter(s=>s.status==="completed").length,cancelled:r.filter(s=>s.status==="cancelled").length},by_priority:{high:r.filter(s=>s.priority==="high").length,normal:r.filter(s=>s.priority==="normal").length,low:r.filter(s=>s.priority==="low").length}}}catch(r){throw console.error("Error fetching exercise requests stats:",r),r}})}export{b as c,U as d,R as f,T as g,S as l,k as u};
