var f=(r,m,t)=>new Promise((h,c)=>{var p=l=>{try{d(t.next(l))}catch(o){c(o)}},n=l=>{try{d(t.throw(l))}catch(o){c(o)}},d=l=>l.done?h(l.value):Promise.resolve(l.value).then(p,n);d((t=t.apply(r,m)).next())});import{j as e}from"./radix-ui-2f58371e.js";import{r as x,L as y}from"./react-vendor-6cf6ded9.js";import{s as N}from"./index-426aa6f1.js";import{H as w,I as u,b8 as C,D as E}from"./ui-icons-e73ce4f7.js";import"./supabase-4b7d20da.js";function U(){const[r,m]=x.useState([]),[t,h]=x.useState(!0),[c,p]=x.useState(null),[n,d]=x.useState("Tous");x.useEffect(()=>{(()=>f(this,null,function*(){try{h(!0);const{data:a,error:j}=yield N.from("app_images").select("id, name, file_path, description, category").eq("category","wallpaper").order("name");if(j)throw j;const v=a.map(i=>{var b;return{id:i.id,name:i.name,category:"Fonds d'√©cran",description:i.description||i.name,file:i.file_path.split("/").pop(),file_path:i.file_path,preview:((b=N.storage.from("images").getPublicUrl(i.file_path).data)==null?void 0:b.publicUrl)||i.file_path}});m(v),p(null)}catch(a){console.error("Erreur chargement wallpapers:",a),p("Impossible de charger les fonds d'√©cran. Veuillez r√©essayer."),m([])}finally{h(!1)}}))()},[]);const l=s=>{const a=document.createElement("a");a.href=s.preview,a.download=s.file,document.body.appendChild(a),a.click(),document.body.removeChild(a)},o=r.length>0?["Tous",...new Set(r.map(s=>s.category))]:["Tous"],g=n==="Tous"?r:r.filter(s=>s.category===n);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b",children:e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(y,{to:"/",className:"text-gray-600 hover:text-gray-900",children:e.jsx(w,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(u,{className:"w-8 h-8 text-blue-600"}),"Biblioth√®que de Fonds d'√âcran"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"T√©l√©chargez des wallpapers pour vos captures d'√©cran"})]})]})})})}),e.jsx("div",{className:"bg-blue-50 border-b border-blue-200",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-blue-100 rounded-lg p-2",children:e.jsx(u,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900",children:"Comment utiliser ces fonds d'√©cran ?"}),e.jsxs("ol",{className:"text-sm text-blue-800 mt-2 space-y-1 list-decimal list-inside",children:[e.jsx("li",{children:"T√©l√©chargez le fond d'√©cran de votre choix"}),e.jsx("li",{children:"D√©finissez-le comme fond d'√©cran sur votre smartphone de test"}),e.jsx("li",{children:"Faites vos captures d'√©cran avec l'application Android"}),e.jsx("li",{children:"Uploadez les captures sur SARASSURE pour validation"})]}),e.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"‚ö†Ô∏è N'utilisez que ces wallpapers fournis. Pas de photos personnelles ou images prot√©g√©es."})]})]})})}),c&&e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800",children:c})})}),t&&e.jsx("div",{className:"container mx-auto px-4 py-12 flex justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(C,{className:"w-8 h-8 text-blue-600 animate-spin"}),e.jsx("p",{className:"text-gray-600",children:"Chargement des fonds d'√©cran..."})]})}),!t&&r.length>0&&e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsx("div",{className:"flex gap-2 flex-wrap",children:o.map(s=>e.jsx("button",{onClick:()=>d(s),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${n===s?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:s},s))})}),!t&&r.length===0&&!c&&e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(u,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucun fond d'√©cran disponible"}),e.jsx("p",{className:"text-gray-600",children:"Les fonds d'√©cran sont en cours de chargement. Veuillez r√©essayer."})]})}),!t&&r.length>0&&e.jsxs("div",{className:"container mx-auto px-4 pb-12",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:g.map(s=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"aspect-[9/16] bg-gray-100 relative overflow-hidden",children:e.jsx("img",{src:s.preview,alt:s.name,className:"w-full h-full object-cover",loading:"lazy",onError:a=>{a.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="100" height="100"%3E%3Crect fill="%23f3f4f6" width="100" height="100"/%3E%3C/svg%3E'}})}),e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("h3",{className:"font-semibold text-sm text-gray-900 truncate",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:s.description})]}),e.jsxs("button",{onClick:()=>l(s),className:"w-full flex items-center justify-center gap-1.5 px-3 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[e.jsx(E,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"T√©l√©charger"})]})]})]},s.id))}),g.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Aucun fond d'√©cran trouv√© dans cette cat√©gorie."})})]}),e.jsx("div",{className:"bg-white border-t mt-8",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"üìê Format"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["R√©solution : 1080x1920px",e.jsx("br",{}),"Ratio : 9:16 (Portrait)",e.jsx("br",{}),"Format : PNG optimis√©"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"üìÑ Licence"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["CC0 / Domaine Public",e.jsx("br",{}),"Usage libre pour SARASSURE",e.jsx("br",{}),"Cr√©√©s sp√©cifiquement pour contributeurs"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"‚ùì Besoin d'aide ?"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Consultez les CGU Contributeurs",e.jsx("br",{}),"ou contactez l'√©quipe admin",e.jsx("br",{}),"pour plus d'informations"]})]})]})})})]})}export{U as default};
