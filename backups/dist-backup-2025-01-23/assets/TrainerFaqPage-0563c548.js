var ke=Object.defineProperty,De=Object.defineProperties;var Le=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var J=(e,r,o)=>r in e?ke(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,p=(e,r)=>{for(var o in r||(r={}))W.call(r,o)&&J(e,o,r[o]);if(P)for(var o of P(r))X.call(r,o)&&J(e,o,r[o]);return e},h=(e,r)=>De(e,Le(r));var g=(e,r)=>{var o={};for(var a in e)W.call(e,a)&&r.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&P)for(var a of P(e))r.indexOf(a)<0&&X.call(e,a)&&(o[a]=e[a]);return o};var S=(e,r,o)=>new Promise((a,n)=>{var s=l=>{try{c(o.next(l))}catch(m){n(m)}},i=l=>{try{c(o.throw(l))}catch(m){n(m)}},c=l=>l.done?a(l.value):Promise.resolve(l.value).then(s,i);c((o=o.apply(e,r)).next())});import{g as ce,i as Q,j as t,G as le,c as R,m as de,k as Fe,u as me,p as Oe,h as Me,H as $e}from"./radix-ui-2f58371e.js";import{r as u,e as v,f as Qe}from"./react-vendor-6cf6ded9.js";import{g as He,a as Ve}from"./faqData-b0f5affe.js";import{c as H,i as ze,m as M,e as ee,C as te,k as oe,l as ae,w as re,j as se,I as Ge,Y as Ke,Z as Be,$ as Ue,a5 as ne,ac as ie}from"./index-426aa6f1.js";import{ag as Ye,w as Ze,K as Je,Q as We,t as Xe,h as et,r as tt}from"./ui-icons-e73ce4f7.js";import"./supabase-4b7d20da.js";var q="Collapsible",[ot,pe]=ce(q),[at,V]=ot(q),ue=u.forwardRef((e,r)=>{const b=e,{__scopeCollapsible:o,open:a,defaultOpen:n,disabled:s,onOpenChange:i}=b,c=g(b,["__scopeCollapsible","open","defaultOpen","disabled","onOpenChange"]),[l,m]=Q({prop:a,defaultProp:n!=null?n:!1,onChange:i,caller:q});return t.jsx(at,{scope:o,disabled:s,contentId:le(),open:l,onOpenToggle:u.useCallback(()=>m(f=>!f),[m]),children:t.jsx(R.div,h(p({"data-state":G(l),"data-disabled":s?"":void 0},c),{ref:r}))})});ue.displayName=q;var xe="CollapsibleTrigger",fe=u.forwardRef((e,r)=>{const s=e,{__scopeCollapsible:o}=s,a=g(s,["__scopeCollapsible"]),n=V(xe,o);return t.jsx(R.button,h(p({type:"button","aria-controls":n.contentId,"aria-expanded":n.open||!1,"data-state":G(n.open),"data-disabled":n.disabled?"":void 0,disabled:n.disabled},a),{ref:r,onClick:de(e.onClick,n.onOpenToggle)}))});fe.displayName=xe;var z="CollapsibleContent",he=u.forwardRef((e,r)=>{const s=e,{forceMount:o}=s,a=g(s,["forceMount"]),n=V(z,e.__scopeCollapsible);return t.jsx(Fe,{present:o||n.open,children:({present:i})=>t.jsx(rt,h(p({},a),{ref:r,present:i}))})});he.displayName=z;var rt=u.forwardRef((e,r)=>{const _=e,{__scopeCollapsible:o,present:a,children:n}=_,s=g(_,["__scopeCollapsible","present","children"]),i=V(z,o),[c,l]=u.useState(a),m=u.useRef(null),b=me(r,m),f=u.useRef(0),C=f.current,y=u.useRef(0),d=y.current,A=i.open||c,w=u.useRef(A),N=u.useRef(void 0);return u.useEffect(()=>{const x=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(x)},[]),Oe(()=>{const x=m.current;if(x){N.current=N.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const I=x.getBoundingClientRect();f.current=I.height,y.current=I.width,w.current||(x.style.transitionDuration=N.current.transitionDuration,x.style.animationName=N.current.animationName),l(a)}},[i.open,a]),t.jsx(R.div,h(p({"data-state":G(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!A},s),{ref:b,style:p({"--radix-collapsible-content-height":C?`${C}px`:void 0,"--radix-collapsible-content-width":d?`${d}px`:void 0},e.style),children:A&&n}))});function G(e){return e?"open":"closed"}var st=ue,nt=fe,it=he,j="Accordion",ct=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[K,lt,dt]=Me(j),[T,Pt]=ce(j,[dt,pe]),B=pe(),ge=v.forwardRef((e,r)=>{const i=e,{type:o}=i,a=g(i,["type"]),n=a,s=a;return t.jsx(K.Provider,{scope:e.__scopeAccordion,children:o==="multiple"?t.jsx(xt,h(p({},s),{ref:r})):t.jsx(ut,h(p({},n),{ref:r}))})});ge.displayName=j;var[ve,mt]=T(j),[be,pt]=T(j,{collapsible:!1}),ut=v.forwardRef((e,r)=>{const m=e,{value:o,defaultValue:a,onValueChange:n=()=>{},collapsible:s=!1}=m,i=g(m,["value","defaultValue","onValueChange","collapsible"]),[c,l]=Q({prop:o,defaultProp:a!=null?a:"",onChange:n,caller:j});return t.jsx(ve,{scope:e.__scopeAccordion,value:v.useMemo(()=>c?[c]:[],[c]),onItemOpen:l,onItemClose:v.useCallback(()=>s&&l(""),[s,l]),children:t.jsx(be,{scope:e.__scopeAccordion,collapsible:s,children:t.jsx(Ce,h(p({},i),{ref:r}))})})}),xt=v.forwardRef((e,r)=>{const b=e,{value:o,defaultValue:a,onValueChange:n=()=>{}}=b,s=g(b,["value","defaultValue","onValueChange"]),[i,c]=Q({prop:o,defaultProp:a!=null?a:[],onChange:n,caller:j}),l=v.useCallback(f=>c((C=[])=>[...C,f]),[c]),m=v.useCallback(f=>c((C=[])=>C.filter(y=>y!==f)),[c]);return t.jsx(ve,{scope:e.__scopeAccordion,value:i,onItemOpen:l,onItemClose:m,children:t.jsx(be,{scope:e.__scopeAccordion,collapsible:!0,children:t.jsx(Ce,h(p({},s),{ref:r}))})})}),[ft,k]=T(j),Ce=v.forwardRef((e,r)=>{const y=e,{__scopeAccordion:o,disabled:a,dir:n,orientation:s="vertical"}=y,i=g(y,["__scopeAccordion","disabled","dir","orientation"]),c=v.useRef(null),l=me(c,r),m=lt(o),f=$e(n)==="ltr",C=de(e.onKeyDown,d=>{var Y;if(!ct.includes(d.key))return;const A=d.target,w=m().filter(O=>{var Z;return!((Z=O.ref.current)!=null&&Z.disabled)}),N=w.findIndex(O=>O.ref.current===A),_=w.length;if(N===-1)return;d.preventDefault();let x=N;const I=0,D=_-1,L=()=>{x=N+1,x>D&&(x=I)},F=()=>{x=N-1,x<I&&(x=D)};switch(d.key){case"Home":x=I;break;case"End":x=D;break;case"ArrowRight":s==="horizontal"&&(f?L():F());break;case"ArrowDown":s==="vertical"&&L();break;case"ArrowLeft":s==="horizontal"&&(f?F():L());break;case"ArrowUp":s==="vertical"&&F();break}const Te=x%_;(Y=w[Te].ref.current)==null||Y.focus()});return t.jsx(ft,{scope:o,disabled:a,direction:n,orientation:s,children:t.jsx(K.Slot,{scope:o,children:t.jsx(R.div,h(p({},i),{"data-orientation":s,ref:l,onKeyDown:a?void 0:C}))})})}),E="AccordionItem",[ht,U]=T(E),je=v.forwardRef((e,r)=>{const f=e,{__scopeAccordion:o,value:a}=f,n=g(f,["__scopeAccordion","value"]),s=k(E,o),i=mt(E,o),c=B(o),l=le(),m=a&&i.value.includes(a)||!1,b=s.disabled||e.disabled;return t.jsx(ht,{scope:o,open:m,disabled:b,triggerId:l,children:t.jsx(st,h(p(p({"data-orientation":s.orientation,"data-state":_e(m)},c),n),{ref:r,disabled:b,open:m,onOpenChange:C=>{C?i.onItemOpen(a):i.onItemClose(a)}}))})});je.displayName=E;var ye="AccordionHeader",we=v.forwardRef((e,r)=>{const i=e,{__scopeAccordion:o}=i,a=g(i,["__scopeAccordion"]),n=k(j,o),s=U(ye,o);return t.jsx(R.h3,h(p({"data-orientation":n.orientation,"data-state":_e(s.open),"data-disabled":s.disabled?"":void 0},a),{ref:r}))});we.displayName=ye;var $="AccordionTrigger",Ne=v.forwardRef((e,r)=>{const l=e,{__scopeAccordion:o}=l,a=g(l,["__scopeAccordion"]),n=k(j,o),s=U($,o),i=pt($,o),c=B(o);return t.jsx(K.ItemSlot,{scope:o,children:t.jsx(nt,h(p(p({"aria-disabled":s.open&&!i.collapsible||void 0,"data-orientation":n.orientation,id:s.triggerId},c),a),{ref:r}))})});Ne.displayName=$;var Ae="AccordionContent",Ie=v.forwardRef((e,r)=>{const c=e,{__scopeAccordion:o}=c,a=g(c,["__scopeAccordion"]),n=k(j,o),s=U(Ae,o),i=B(o);return t.jsx(it,h(p(p({role:"region","aria-labelledby":s.triggerId,"data-orientation":n.orientation},i),a),{ref:r,style:p({"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)"},e.style)}))});Ie.displayName=Ae;function _e(e){return e?"open":"closed"}var gt=ge,vt=je,bt=we,Re=Ne,Pe=Ie;const Ct=gt,Se=v.forwardRef((a,o)=>{var n=a,{className:e}=n,r=g(n,["className"]);return t.jsx(vt,p({ref:o,className:H("border-b",e)},r))});Se.displayName="AccordionItem";const Ee=v.forwardRef((n,a)=>{var s=n,{className:e,children:r}=s,o=g(s,["className","children"]);return t.jsx(bt,{className:"flex",children:t.jsxs(Re,h(p({ref:a,className:H("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e)},o),{children:[r,t.jsx(Ye,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]}))})});Ee.displayName=Re.displayName;const qe=v.forwardRef((n,a)=>{var s=n,{className:e,children:r}=s,o=g(s,["className","children"]);return t.jsx(Pe,h(p({ref:a,className:H("overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",e)},o),{children:t.jsx("div",{className:"pb-4 pt-0",children:r})}))});qe.displayName=Pe.displayName;const jt=({step:e,index:r})=>{const[o,a]=u.useState(null),[n,s]=u.useState(null);return u.useEffect(()=>{(()=>S(void 0,null,function*(){if(e.image_id){const c=yield ie(e.image_id);a(c)}if(e.pictogram_id){const c=yield ie(e.pictogram_id);s(c)}}))()},[e.image_id,e.pictogram_id]),t.jsxs("div",{className:"flex items-start space-x-3 p-3 border-b last:border-b-0 bg-background/30 rounded-md",children:[n&&t.jsx("img",{src:ne(n.file_path),alt:n.description||`Pictogramme étape ${r+1}`,className:"h-8 w-8 md:h-10 md:w-10 object-contain rounded border flex-shrink-0 mt-1"}),t.jsxs("div",{className:"flex-grow",children:[t.jsx("p",{className:"text-sm md:text-base text-foreground mb-2",children:e.instruction}),o&&t.jsx("img",{src:ne(o.file_path),alt:o.description||`Image étape ${r+1}`,className:"max-w-xs md:max-w-sm rounded-md border shadow-sm"})]})]})},St=()=>{const[e,r]=u.useState([]),[o,a]=u.useState(!0),[n,s]=u.useState(""),[i,c]=u.useState(""),{toast:l}=ze(),m=Qe(),b=u.useCallback(()=>S(void 0,null,function*(){a(!0);try{const d=yield He();r(d||[])}catch(d){l({title:"Erreur",description:"Impossible de charger la FAQ.",variant:"destructive"})}finally{a(!1)}}),[l]);u.useEffect(()=>{b()},[b]);const f=d=>{s(d.target.value.toLowerCase())},C=d=>S(void 0,null,function*(){if(d.preventDefault(),!i.trim()){l({title:"Question vide",description:"Veuillez écrire votre question.",variant:"destructive"});return}try{yield Ve(i),c(""),l({title:"Question envoyée !",description:"Votre question a été soumise. Une réponse sera ajoutée dès que possible.",className:"bg-primary text-primary-foreground"}),b()}catch(A){l({title:"Erreur",description:"Impossible d'envoyer la question.",variant:"destructive"})}}),y=e.filter(d=>d.question.toLowerCase().includes(n)||d.category&&d.category.toLowerCase().includes(n));return t.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"container mx-auto p-4 md:p-6",children:[t.jsxs(ee,{variant:"outline",onClick:()=>m(-1),className:"mb-4",children:[t.jsx(Ze,{className:"mr-2 h-4 w-4"})," Retour"]}),t.jsxs(te,{className:"mb-8 shadow-lg bg-gradient-to-br from-primary/10 via-background to-background",children:[t.jsxs(oe,{className:"text-center",children:[t.jsx(M.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1},children:t.jsx(Je,{className:"mx-auto h-16 w-16 text-primary mb-3"})}),t.jsx(ae,{className:"text-3xl md:text-4xl font-extrabold text-primary",children:"FAQ Formateurs"}),t.jsx(re,{className:"text-md md:text-lg text-muted-foreground mt-1",children:"Trouvez des réponses aux questions fréquentes et des solutions aux difficultés rencontrées."})]}),t.jsx(se,{children:t.jsxs("div",{className:"relative mb-6",children:[t.jsx(Ge,{type:"text",placeholder:"Rechercher une question, un mot-clé...",value:n,onChange:f,className:"pl-10 text-base h-12 border-primary/50 focus:border-primary"}),t.jsx(We,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"})]})})]}),o?t.jsx("div",{className:"flex justify-center items-center h-40",children:t.jsx(Xe,{className:"h-8 w-8 animate-spin text-primary"})}):y.length>0?t.jsx(Ct,{type:"single",collapsible:!0,className:"w-full space-y-3",children:y.map(d=>t.jsx(M.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},children:t.jsxs(Se,{value:d.id,className:"border rounded-lg bg-card shadow-sm hover:shadow-md transition-shadow",children:[t.jsx(Ee,{className:"p-4 md:p-5 text-left hover:no-underline",children:t.jsx("span",{className:"text-md md:text-lg font-medium text-primary",children:d.question})}),t.jsxs(qe,{className:"p-4 md:p-5 border-t",children:[t.jsx("div",{className:"space-y-4",children:d.answer_steps&&d.answer_steps.map((A,w)=>t.jsx(jt,{step:A,index:w},w))}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-3 pt-3 border-t",children:["Catégorie: ",d.category]})]})]})},d.id))}):t.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Aucune Q&R ne correspond à votre recherche."}),t.jsxs(te,{className:"mt-10 shadow-lg",children:[t.jsxs(oe,{children:[t.jsxs(ae,{className:"flex items-center text-xl md:text-2xl text-secondary",children:[t.jsx(et,{className:"mr-3 h-7 w-7"})," Vous ne trouvez pas de réponse ?"]}),t.jsx(re,{children:"Posez votre question ici. Elle sera ajoutée à la FAQ avec une réponse dès que possible."})]}),t.jsxs("form",{onSubmit:C,children:[t.jsxs(se,{children:[t.jsx(Ke,{htmlFor:"new-question",className:"sr-only",children:"Votre question"}),t.jsx(Be,{id:"new-question",placeholder:"Écrivez votre question ici...",value:i,onChange:d=>c(d.target.value),rows:4,className:"text-base"})]}),t.jsx(Ue,{children:t.jsxs(ee,{type:"submit",className:"w-full md:w-auto ml-auto bg-secondary hover:bg-secondary/90",children:[t.jsx(tt,{className:"mr-2 h-4 w-4"})," Envoyer ma question"]})})]})]})]})};export{St as default};
