var x=(n,a,r)=>new Promise((l,c)=>{var d=s=>{try{o(r.next(s))}catch(t){c(t)}},p=s=>{try{o(r.throw(s))}catch(t){c(t)}},o=s=>s.done?l(s.value):Promise.resolve(s.value).then(d,p);o((r=r.apply(n,a)).next())});import{j as e}from"./radix-ui-2f58371e.js";import{f as y,r as m}from"./react-vendor-6cf6ded9.js";import{u as C,i as S,s as j}from"./index-426aa6f1.js";import{t as z,b7 as g,bd as V,a6 as w,a7 as q}from"./ui-icons-e73ce4f7.js";import"./supabase-4b7d20da.js";function L(){const n=y(),[a,r]=m.useState(!1),[l,c]=m.useState(!1),[d,p]=m.useState(!0),[o,s]=m.useState(!1),{currentUser:t}=C(),{toast:h}=S();m.useEffect(()=>{(()=>x(this,null,function*(){try{if(!t){p(!1);return}const{data:u,error:b}=yield j.from("profiles").select("cgu_accepted, cgu_accepted_date").eq("id",t.id).single();b&&console.warn("Erreur lors de la récupération du profil:",b);const v=(u==null?void 0:u.cgu_accepted)===!0,N=localStorage.getItem("cgu_accepted")==="true";(v||N)&&(s(!0),r(!0))}catch(u){console.error("Erreur lors de la vérification du statut CGU:",u)}finally{p(!1)}}))()},[t]);const f=()=>x(this,null,function*(){if(!(!a||!t))try{c(!0);const{error:i}=yield j.from("profiles").update({cgu_accepted:!0,cgu_accepted_date:new Date().toISOString()}).eq("id",t.id);i&&console.warn("Profile update failed:",i),localStorage.setItem("cgu_accepted","true"),localStorage.setItem("cgu_accepted_date",new Date().toISOString()),s(!0),h({title:"CGU acceptées",description:"Vos conditions d'utilisation ont été enregistrées avec succès."}),setTimeout(()=>{n("/contributeur")},1e3)}catch(i){console.error("Erreur lors de l'acceptation des CGU:",i),h({title:"Erreur",description:"Impossible d'enregistrer votre acceptation. Veuillez réessayer.",variant:"destructive"})}finally{c(!1)}});return e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[d&&e.jsxs("div",{className:"flex items-center justify-center py-20",children:[e.jsx(z,{className:"w-8 h-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Vérification du statut CGU..."})]}),!d&&o&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(g,{className:"w-8 h-8 text-green-600"}),e.jsx("h2",{className:"text-2xl font-bold text-green-800",children:"CGU déjà acceptées"})]}),e.jsx("p",{className:"text-green-700 mb-4",children:"Vous avez déjà accepté les conditions d'utilisation pour contributeurs."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>n("/contributeur"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Retour au dashboard"}),e.jsx("button",{onClick:()=>s(!1),className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200",children:"Relire les conditions"})]})]}),!d&&!o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("button",{onClick:()=>n(-1),className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 mb-6",children:[e.jsx(V,{className:"w-4 h-4"}),"Retour"]}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(w,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Conditions d'utilisation pour contributeurs"})]}),e.jsxs("p",{className:"text-gray-600",children:["Conditions Générales d'Utilisation (CGU) - Dernière mise à jour: ",new Date().toLocaleDateString("fr-FR")]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 mb-8",children:[e.jsxs("div",{className:"prose prose-sm max-w-none text-gray-700",children:[e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"1. Acceptation des conditions"}),e.jsx("p",{className:"mb-4",children:"En soumettant un exercice ou une image sur la plateforme SarasSure, vous acceptez l'intégralité de ces Conditions Générales d'Utilisation (CGU). Si vous n'acceptez pas ces conditions, vous ne pouvez pas contribuer à la plateforme."}),e.jsx("p",{children:"Nous nous réservons le droit de modifier ces conditions à tout moment. Les modifications entreront en vigueur immédiatement après publication. Votre utilisation continue de la plateforme constitue votre acceptation des modifications."})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"2. Propriété intellectuelle et droits d'auteur"}),e.jsxs("p",{className:"mb-4",children:[e.jsx("strong",{children:"Vos droits:"})," Vous conservez la propriété complète de vos créations (exercices et images). Vous confirmez que vous êtes le propriétaire ou le détenteur des droits d'auteur de tout contenu que vous soumettez."]}),e.jsxs("p",{className:"mb-4",children:[e.jsx("strong",{children:"Licence accordée:"})," En soumettant votre contenu, vous accordez à SarasSure et à ses utilisateurs une licence perpétuelle, non exclusive, royalty-free, mondiale pour utiliser, reproduire, modifier et distribuer votre contenu sur la plateforme."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Pas de violation:"})," Vous garantissez que votre contenu ne viole les droits d'auteur, les brevets, les marques commerciales ou les droits de propriété intellectuelle d'une tierce partie."]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"3. Modération et validation"}),e.jsx("p",{className:"mb-4",children:"Tout contenu soumis est sujet à une modération et une validation par notre équipe avant d'être publié. Nous nous réservons le droit:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 mb-4",children:[e.jsx("li",{children:"De rejeter tout contenu jugé inapproprié, de faible qualité ou non conforme"}),e.jsx("li",{children:"De modifier ou reformater votre contenu pour assurer la cohérence de la plateforme"}),e.jsx("li",{children:"De supprimer votre contenu s'il viole ces conditions"}),e.jsx("li",{children:"De suspendre votre compte en cas de violations répétées"})]}),e.jsx("p",{children:"Les critères de validation incluent: la clarté, la pertinence pédagogique, le respect des lignes directrices de format et l'absence de contenu offensant ou discriminatoire."})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"4. Responsabilité et indemnisation"}),e.jsxs("p",{className:"mb-4",children:[e.jsx("strong",{children:"Votre responsabilité:"})," Vous êtes responsable du contenu que vous soumettez. Vous acceptez d'indemniser SarasSure contre toute réclamation, perte ou dommage résultant de votre contenu ou de vos actions."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Limitation de responsabilité:"})," SarasSure ne peut être tenue responsable des dommages indirects, accidentels ou consécutifs résultant de votre utilisation ou de l'impossibilité d'utiliser la plateforme."]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"5. Règles de contenu"}),e.jsx("p",{className:"mb-4",children:"Vous acceptez de ne pas soumettre de contenu:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 mb-4",children:[e.jsx("li",{children:"Offensant, discriminatoire, harcelant ou menaçant"}),e.jsx("li",{children:"Contenant des informations personnelles d'autres personnes sans consentement"}),e.jsx("li",{children:"Violant les droits d'auteur ou la propriété intellectuelle"}),e.jsx("li",{children:"Contenant du malware, des virus ou du code malveillant"}),e.jsx("li",{children:"Publicitaire ou promotionnel sans autorisation"}),e.jsx("li",{children:"Manifestement inexact ou trompeur"})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"6. Rémunération et droits d'utilisation"}),e.jsxs("p",{className:"mb-4",children:[e.jsx("strong",{children:"Modèle de rémunération:"})," Les contributeurs ne reçoivent pas de compensation financière pour leurs contributions. Votre participation est volontaire et basée sur la passion pour l'éducation et le partage de connaissances."]}),e.jsxs("p",{className:"mb-4",children:[e.jsx("strong",{children:"Utilisation future:"})," SarasSure se réserve le droit d'utiliser votre contenu dans d'autres contextes éducatifs ou commerciaux, tant qu'il est clairement attribué et utilisé conformément à votre licence."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Retrait du contenu:"})," Vous pouvez demander le retrait de votre contenu à tout moment. Cependant, les copies déjà distribuées ne pourront pas être retirées."]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"7. Confidentialité et données"}),e.jsx("p",{className:"mb-4",children:"Les informations personnelles que vous fournissez seront traitées conformément à notre Politique de Confidentialité. Nous collectons uniquement les données nécessaires pour:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 mb-4",children:[e.jsx("li",{children:"Maintenir votre compte contributeur"}),e.jsx("li",{children:"Communiquer à propos de vos contributions"}),e.jsx("li",{children:"Améliorer nos services"}),e.jsx("li",{children:"Respecter nos obligations légales"})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"8. Résiliation et suspension"}),e.jsx("p",{className:"mb-4",children:"Nous pouvons suspendre ou résilier votre accès à la plateforme, avec ou sans préavis, si:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 mb-4",children:[e.jsx("li",{children:"Vous violez ces conditions"}),e.jsx("li",{children:"Vous soumettez du contenu offensant ou de mauvaise qualité de manière répétée"}),e.jsx("li",{children:"Vous engagez un comportement abusif envers d'autres utilisateurs"}),e.jsx("li",{children:"Votre compte est utilisé à des fins inappropriées"})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"9. Contact et support"}),e.jsx("p",{className:"mb-4",children:"Si vous avez des questions concernant ces conditions ou vos contributions, veuillez nous contacter via le formulaire de contact disponible sur la plateforme."}),e.jsx("p",{children:"Pour signaler une violation de droits d'auteur ou une utilisation abusive, veuillez envoyer un email détaillé à notre équipe de modération."})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"10. Dispositions générales"}),e.jsx("p",{className:"mb-4",children:"Ces conditions constituent l'intégralité de l'accord entre vous et SarasSure concernant les contributions. Si une disposition est jugée invalide, les autres dispositions resteront en vigueur."}),e.jsx("p",{children:"Ces conditions sont régies par la législation applicable et tout différend sera résolu selon les procédures légales en vigueur."})]})]}),e.jsxs("div",{className:"mt-8 p-4 bg-amber-50 border border-amber-200 rounded-lg flex items-start gap-3",children:[e.jsx(q,{className:"w-5 h-5 text-amber-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-amber-900 mb-1",children:"Lecture requise"}),e.jsx("p",{className:"text-sm text-amber-800",children:"Veuillez lire et comprendre ces conditions avant de soumettre votre premier contenu. Votre acceptation est obligatoire pour contribuer à la plateforme."})]})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg shadow-sm p-8",children:e.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[e.jsx(g,{className:"w-6 h-6 text-blue-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Acceptation des conditions"}),e.jsx("p",{className:"text-gray-700 mb-4",children:"En acceptant ces conditions, vous confirmez:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700 mb-6",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600 mt-1",children:"✓"}),e.jsx("span",{children:"Vous êtes propriétaire ou détenteur des droits d'auteur de votre contenu"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600 mt-1",children:"✓"}),e.jsx("span",{children:"Vous accordez à SarasSure une licence pour utiliser votre contenu"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600 mt-1",children:"✓"}),e.jsx("span",{children:"Vous avez lu et compris toutes les conditions ci-dessus"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600 mt-1",children:"✓"}),e.jsx("span",{children:"Vous acceptez les règles de modération et de suppression de contenu"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white border border-gray-200 rounded-lg mb-6",children:[e.jsx("input",{type:"checkbox",id:"accept-cgu",checked:a,onChange:i=>r(i.target.checked),className:"w-5 h-5 text-blue-600 rounded cursor-pointer"}),e.jsxs("label",{htmlFor:"accept-cgu",className:"cursor-pointer text-gray-900",children:[e.jsx("span",{className:"font-medium",children:"J'accepte les conditions d'utilisation pour contributeurs"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cette acceptation est requise pour soumettre du contenu"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>n(-1),className:"px-6 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Refuser"}),e.jsx("button",{onClick:f,disabled:!a||l,className:`px-6 py-2 rounded-lg font-medium transition-colors ${a&&!l?"bg-blue-600 hover:bg-blue-700 text-white cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:l?"Enregistrement...":"Accepter et continuer"})]})]})]})}),e.jsxs("div",{className:"mt-8 text-center text-sm text-gray-600",children:[e.jsx("p",{children:"Ces conditions s'appliquent à tous les contributeurs de la plateforme SarasSure"}),e.jsxs("p",{className:"mt-2",children:["Vous pouvez consulter notre ",e.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Politique de Confidentialité"})," pour plus d'informations sur le traitement de vos données."]})]})]})]})})}export{L as default};
